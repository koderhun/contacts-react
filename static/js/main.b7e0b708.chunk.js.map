{"version":3,"sources":["pages/Add/styles.module.scss","components/Picture/styles.module.scss","store/slices.js","store/reducers.js","store/index.js","pages/Add/Add.jsx","components/Picture/Picture.jsx","components/Item.jsx","components/Filter.jsx","pages/List.jsx","hooks/useDebounce.js","App.jsx","index.js"],"names":["module","exports","setError","state","action","status","error","payload","fetchList","createAsyncThunk","_","a","rejectWithValue","fetch","response","ok","Error","json","results","console","log","message","addItem","item","name","method","headers","body","JSON","stringify","contactsSlice","createSlice","initialState","list","searchList","extraReducers","pending","fulfilled","rejected","rootReducer","actions","filterList","contacts","reducer","store","configureStore","Add","dispatch","useDispatch","useState","redirect","setRedirect","className","styles","container","initialValues","email","location","phone","validate","values","errors","test","onSubmit","setSubmitting","touched","handleChange","handleBlur","handleSubmit","isSubmitting","to","title","type","onChange","onBlur","value","submit","disabled","Picture","picture","styleTooltip","backgroundImage","large","src","thumbnail","alt","big","style","Item","deleteItem","first","last","city","id","login","uuid","date","dayjs","registered","format","onClick","Filter","handleInput","placeholder","e","target","List","useSelector","localList","setLocalList","debouncedSearch","delay","debouncedValue","setDebouncedValue","useEffect","handler","setTimeout","clearTimeout","useDebounce","trimName","toUpperCase","trim","newLocalList","filter","indexOf","map","key","App","path","exact","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b7e0b708.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1ywc_\",\"error\":\"styles_error__aRWBq\",\"submit\":\"styles_submit__2tMy6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"picture\":\"styles_picture__3YCCP\",\"big\":\"styles_big__3gLOn\"};","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\n\nconst setError = (state, action) => {\n  state.status = 'rejected';\n  state.error = action.payload;\n}\n\nexport const fetchList = createAsyncThunk(\n  'contacts/fetchList',\n  async function (_, { rejectWithValue }) {\n    try {\n      const response = await fetch('https://randomuser.me/api/?results=15');\n\n      if (!response.ok) {\n        throw new Error('Load list Error!');\n      }\n\n      const { results } = await response.json();\n      console.log('ress', results)\n      return results;\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\n// не нашел в описание api добавление нового пользователя.\n// делаю как пример из своего старого приложения.\n\nexport const addItem = createAsyncThunk(\n  'contacts/addItem',\n  async function (item, { rejectWithValue }) {\n    console.log('item', item)\n    try {\n      const response = await fetch(`https://jsonplaceholder.typicode.com/todos/${item.name}`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(item)\n      });\n\n      if (!response.ok) {\n        throw new Error('Can\\'t delete task. Server error.');\n      }\n\n    } catch (error) {\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nexport const contactsSlice = createSlice({\n  name: \"contacts\",\n  initialState: {\n    status: null,\n    error: null,\n    list: [],\n    searchList: []\n  },\n  extraReducers: {\n    [fetchList.pending]: (state) => {\n      state.status = 'pending'\n      state.error = null\n    },\n    [fetchList.fulfilled]: (state, action) => {\n      state.status = 'fulfilled'\n      state.list = action.payload\n    },\n    [fetchList.rejected]: setError,\n    [addItem.rejected]: setError,\n  }\n});\n\n\nexport const { filterList } = contactsSlice.actions","import { contactsSlice } from './slices'\n\nexport const rootReducer = {\n    contacts: contactsSlice.reducer\n}","import { configureStore } from '@reduxjs/toolkit';\nimport {rootReducer} from './reducers';\n\nexport const store = configureStore({\n  reducer: rootReducer\n});\n","import React, { useState } from 'react'\nimport { Formik } from 'formik';\nimport { useDispatch } from 'react-redux';\nimport { Redirect } from 'react-router-dom'\nimport { addItem } from '../../store/slices'\nimport styles from './styles.module.scss'\n\nexport default function Add() {\n    const dispatch = useDispatch();\n\n    const [redirect, setRedirect] = useState(false);\n\n    return (\n        <div className={styles.container}>\n            <Formik\n                initialValues={{\n                    name: '',\n                    email: '',\n                    location: '',\n                    phone: ''\n                }}\n                validate={values => {\n                    const errors = {};\n                    if (!values.email) {\n                        errors.email = 'Required';\n                    } else if (\n                        !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i.test(values.email)\n                    ) {\n                        errors.email = 'Invalid email address';\n                    }\n                    if (!values.name) {\n                        errors.name = 'Required';\n                    }\n                    return errors;\n                }}\n                onSubmit={(values, { setSubmitting }) => {\n                    console.log('values', values)\n                    dispatch(addItem(values))\n                    setSubmitting(false);\n                    setRedirect(true);\n                }}\n            >\n                {({\n                    values,\n                    errors,\n                    touched,\n                    handleChange,\n                    handleBlur,\n                    handleSubmit,\n                    isSubmitting,\n                }) => (\n                    <form onSubmit={handleSubmit}>\n                        {redirect && <Redirect to=\"/\" />}\n                        <label>\n                            <div className={styles.title}>Name</div>\n                            <input\n                                type=\"text\"\n                                name=\"name\"\n                                onChange={handleChange}\n                                onBlur={handleBlur}\n                                value={values.name}\n                            />\n                            <div className={styles.error}>\n                                {errors.name && touched.name && errors.name}\n                            </div>\n                        </label>\n                        <label>\n                            <div className={styles.title}>Email</div>\n                            <input\n                                type=\"email\"\n                                name=\"email\"\n                                onChange={handleChange}\n                                onBlur={handleBlur}\n                                value={values.email}\n                            />\n                            <div className={styles.error}>\n                                {errors.email && touched.email && errors.email}\n                            </div>\n                        </label>\n                        <label>\n                            <div className={styles.title}>Location</div>\n                            <input\n                                type=\"text\"\n                                name=\"location\"\n                                onChange={handleChange}\n                                onBlur={handleBlur}\n                                value={values.location}\n                            />\n                        </label>\n                        <label>\n                            <div className={styles.title}>Phone</div>\n                            <input\n                                type=\"text\"\n                                name=\"phone\"\n                                onChange={handleChange}\n                                onBlur={handleBlur}\n                                value={values.phone}\n                            />\n                        </label>\n                        <button className={styles.submit} type=\"submit\" disabled={isSubmitting}>\n                            Submit\n                        </button>\n                    </form>\n                )}\n            </Formik>\n        </div>\n    )\n}\n","import React from 'react'\nimport styles from './styles.module.scss';\n\n\nexport const Picture = ({picture, name}) => {\n    const styleTooltip = {backgroundImage: `url(${ picture.large})`};\n\n    return (\n        <div className={styles.picture}>\n            <img src={picture.thumbnail} alt={name} />\n\n            <div className={styles.big} style={styleTooltip}></div>\n        </div>\n    )\n}\n","import React from 'react'\nimport dayjs from 'dayjs';\nimport { Picture } from './Picture/Picture';\n\nexport const Item = ({item, deleteItem}) => {\n\n    const name = `${item.name.first} ${item.name.last}`;\n    const location = `${item.location.state} ${item.location.city}`;\n    const id = item.login.uuid\n\n    const date = dayjs(item.registered.date).format('DD.MM.YYYY');\n\n    return (\n        <tr>\n            <td>\n                <Picture {...{picture: item.picture, name}}/>\n            </td>\n            <td>\n                {name}\n            </td>\n            <td>\n                {location}\n            </td>\n            <td>{item.email}</td>\n            <td>{item.phone}</td>\n            <td>{date}</td>\n            <td>\n                <button onClick={() => deleteItem(id)}>del</button>\n            </td>\n        </tr>\n    )\n}\n","import React from 'react'\n\n\nexport const Filter = ({handleInput}) => {\n    return (\n        <div>\n            <input type=\"text\" placeholder=\"Name\" onChange={(e) => handleInput(e.target.value)}/>\n        </div>\n    )\n}\n","import React, {useEffect, useState} from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport {fetchList} from '../store/slices'\nimport useDebounce from '../hooks/useDebounce';\nimport {Item} from '../components/Item'\nimport {Filter} from '../components/Filter'\n\nexport default function List() {\n    const dispatch = useDispatch();\n    const {list, status} = useSelector(state => state.contacts)\n    const [localList, setLocalList] = useState([])\n\n    const debouncedSearch = useDebounce(localList, 500);\n\n    useEffect(() => {\n        dispatch(fetchList());\n    }, [dispatch]);\n\n    useEffect(() => {\n        setLocalList(list)\n    }, [list])\n\n    const deleteItem = (id) => {\n        console.log('id item', id)\n    }\n\n    const handleInput = (name) => {\n        if(debouncedSearch) {\n            const trimName = name.toUpperCase().trim();\n        \n            const newLocalList = list.filter(({name}) => {\n                const fullName = `${name.first} ${name.last}`.toUpperCase()\n                if((fullName.indexOf(trimName) > -1) || trimName === '') {\n                    return true\n                }\n            })\n            setLocalList(newLocalList)\n        } else {\n            setLocalList([])\n        }\n    } \n\n    if(status === 'pending') return <h1>Loading...</h1>\n\n    return (\n        <div>\n            <table>\n                <thead>\n                    <tr>\n                        <td>\n                            Picture\n                        </td>\n                        <td>\n                            <Filter {...{handleInput}}/>\n                        </td>\n                        <td>\n                            Location\n                        </td>\n                        <td>\n                            Email\n                        </td>\n                        <td>\n                            Phone\n                        </td>\n                        <td>\n                            Registration Date\n                        </td>\n                        <td></td>\n                    </tr>\n                </thead>\n                <tbody>\n                    {localList.map((item, key) => {\n                        return <Item {...{item, deleteItem, key}}/>\n                    })}\n                </tbody>\n            </table>\n        </div>\n    )\n}\n","import { useState, useEffect } from 'react';\n\nexport default function useDebounce(value, delay) {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    console.log('vvv', value);\n\n    useEffect(\n        () => {\n            const handler = setTimeout(() => {\n                setDebouncedValue(value);\n            }, delay);\n\n            return () => {\n                clearTimeout(handler);\n            };\n        },\n        [value, delay]\n    );\n\n    return debouncedValue;\n}\n","import React from 'react';\nimport {Switch, Route, BrowserRouter as Router, Link} from 'react-router-dom';\nimport Add from './pages/Add/Add';\nimport List from './pages/List';\n\nfunction App() {\n  return (\n    <Router>\n      <header>\n        <div className=\"container\">\n          <nav>\n            <Link to=\"/contacts-react/\">Contacts</Link>\n            <Link to=\"/contacts-react/add\">Add Contacts</Link>\n          </nav>\n        </div>\n      </header>\n      <div className=\"container\">\n        <Switch>\n          <Route path=\"/contacts-react/\" exact>\n            <List/>\n          </Route>\n          <Route path=\"/contacts-react/add\">\n            <Add/>\n          </Route>\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\nimport {store} from './store'\nimport './index.scss';\nimport App from './App';\n\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}